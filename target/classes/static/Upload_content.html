<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <title>资源详情</title>

    <script src="js/vue.js"></script>
    <script src="js/layer.js" type="text/javascript"></script>

    <link href="css/styles.css" rel="stylesheet">


</head>
<body>

<div class="container">

    <div class="col-md-5 col-md-offset-2" id="title">
        <div class="col-md-2 col-md-offset-0">
            <svg version="1.1" xmlns="http://www.w3.org/2000/svg">
                <rect width="50" height="60" style="fill:gray;"/>
                <polygon style="fill:#FFFFFF;" points="35,0 50,0 50,15 "/>
                <polygon style="fill:#FFFFFF;" points="30,3 45,20 30,20 "/>
                <text x="5" y="40" font-size="15" style="fill:white">RAR</text>
            </svg>
        </div>

        <div class="col-md-9 col-md-offset-1">
            <h3 id="filename">{{ message }}</h3>
            <span class="label label-primary" id="biaoqian"> {{message}}</span>
        </div>
    </div>


    <div class="col-md-9 col-md-offset-2">
        <p class="text-muted" id="publish">{{ message }}</p>
    </div>

    <div clas="container-content" id="content">
        <div class="col-md-8 col-md-offset-2">
            <p>资料详细描述：</p>
            <p id="remark">{{ message }}</p>

            <hr class="divider" width="700px">
        </div>

        <div class="col-md-8 col-md-offset-2">
            <div class="row">
                <div class="col-md-4">
                    <span class="glyphicon glyphicon-yen" aria-hidden="true" style="color: #337ab7" id="score">所需积分：{{ message }}</span>
                    &nbsp &nbsp;
                </div>
                <div class="col-md-4">
                    <span style="color: #337ab7" id="count">下载次数：{{ message }}</span>
                </div>

                <div class="col-md-4 col-md-offset-8">
                    <button type="button" class="btn btn-default btn-lg"  href="#">
                        <span  class="glyphicon glyphicon-download-alt" aria-hidden="true" style="color: #337ab7">下载</span>
                    </button>
                </div>

                <hr class="divider" width="700px">
            </div>

        </div>
    </div>

</div>

<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>

<script type="text/javascript">

    upLoad();

    function upLoad() {

        var upload = getUpload();

        var user = getUser(upload.userId);

        //var classify = getItClassify(upload.itClassifyId);

        var Data = formatDate(upload.upTime);


        var filename = new Vue({
            el: '#filename',
            data: {
                message: upload.name
            }
        })

        /*var biaoqian = new Vue({
            el: '#biaoqian',
            data: {
                message: classify
            }
        })*/


        var remark = new Vue({
            el: '#remark',
            data: {
                message: upload.remark

            }
        })

        var publish = new Vue({
            el: '#publish',
            data: {
                message: '发布者：'+ user +'   '+'上传时间：' + Data
            }
        })

        var score = new Vue({
            el: '#score',
            data: {
                message: upload.score
            }
        })

        var count = new Vue({
            el: '#count',
            data: {
                message: upload.downNum
            }
        })
    }


    function getUpload() {
        var upload = null;
        var uploadfile = {};
        uploadfile.fileId=1;
        $.ajax({
            async : false, //设置同步
            type : 'POST',
            url : 'http://localhost:8080/GRCBlog/getUpload',
            data : uploadfile,
            dataType : 'json',
            success : function(result) {
                if (result!=null) {
                    upload = result.upload;
                }
                else{
                   alert('查询错误');
                }
            },
            error : function(result) {
               alert('查询错误!!');
            }
        });
        //划重点划重点，这里的eval方法不同于prase方法，外面加括号
        upload = eval("("+upload+")");
        return upload;
    }

    function getUser(id) {
        var user = null;
        var users = {};
        users.userId = id;

        $.ajax({
            async : false, //设置同步
            type : 'POST',
            url : 'http://localhost:8080/GRCBlog/getUser',
            data :users,
            dataType : 'json',
            success : function(result) {
                if (result!=null) {
                    user = result.user;
                }
                else{
                    alert('查询错误');
                }
            },
            error : function(result) {
                alert('查询错误!!');
            }
        });
        //划重点划重点，这里的eval方法不同于prase方法，外面加括号
       // user = eval("("+user+")");
        return user.userName;
    }

    /*function getItClassify(id) {
        var itClassify = null;
        var classify = {};
        classify.itClassifyId = id;

        $.ajax({
            async : false, //设置同步
            type : 'POST',
            url : 'http://localhost:8080/GRCBlog/getUser',
            data :classify,
            dataType : 'json',
            success : function(result) {
                if (result!=null) {
                    itClassify = result.itClassify;
                }
                else{
                    alert('查询错误');
                }
            },
            error : function(result) {
                alert('查询错误!!');
            }
        });
        //划重点划重点，这里的eval方法不同于prase方法，外面加括号
        // user = eval("("+user+")");
        return itClassify.itClassifyName;
    }*/

    function   formatDate(time)   {
        var date = new Date(time);
        Y = date.getFullYear() + '-';
        M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '-';
        D = date.getDate() + ' ';
        h = date.getHours() + ':';
        m = date.getMinutes() + ':';
        s = date.getSeconds();

        return Y+M+D+h+m+s;
    }

</script>


</body>
</html>